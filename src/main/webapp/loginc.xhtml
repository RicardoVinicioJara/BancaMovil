<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

    <ui:composition template="templete/cabezeraLogin.xhtml">
        <ui:define name="title">
            lOGIN
        </ui:define>
        <ui:define name="content">
            <h:panelGroup rendered="#{not empty loginBEAN.mesaje}">
                <div class="alert alert-warning alert-danger fade show" role="alert">
                    <h:outputLabel value="#{loginBEAN.mesaje}" /><br></br>
                    <h:commandButton  class="btn btn-outline-success" a:data-toggle="modal" a:data-target="#modalLoginForm" value="Reintentar"/>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </h:panelGroup>
            <h:panelGroup rendered="#{empty loginBEAN.mesaje}">
                <div class="alert alert-warning alert-dismissible fade show" role="alert">
                    <strong>#{loginBEAN.tipo=param['tipo']}</strong> 
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </h:panelGroup>
            <h:panelGroup rendered="#{not empty param['msj']}">
                <div class="alert alert-danger alert-danger fade show" role="alert">
                    <h:outputLabel value="#{param['msj']}" /><br></br>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </h:panelGroup>



            <div class="container">
                <div class="row">
                    <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
                        <div class="card card-signin my-5">
                            <div class="card-body">

                                <h5 class="card-title text-center">Iniciar sesión</h5>
                                <h:panelGroup id="panel">
                                    <h:form>
                                        <label value="#{loginBEAN.tipo=param['tipo']}" />
                                        <div class="input-group form-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fas fa-user">Cedula</i></span>
                                            </div>
                                            <h:inputText a:type="text" value="#{loginBEAN.cedula}" class="form-control" a:placeholder="cedula"/>

                                        </div>
                                        <div class="input-group form-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fas fa-key">Password</i></span>
                                            </div>
                                            <h:inputText a:type="password" value="#{loginBEAN.contra}"  class="form-control" a:placeholder="password"/>
                                        </div>
                                        <div class="input-group form-group col-md-4 mx-auto">
                                            <h:commandButton  class="btn btn-outline-success" a:data-toggle="modal" a:data-target="#modalLoginForm" action="#{loginBEAN.loginUser()}" value="Ingresar">
                                                <f:ajax execute="panel"></f:ajax>
                                            </h:commandButton>
                                        </div>
                                    </h:form>
                                </h:panelGroup>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="modalLoginForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header text-center">
                            <h4 class="modal-title w-100 font-weight-bold">Necesita Actualizar la Contraseña</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-footer d-flex justify-content-center" >
                            <div id='desaparece'>
                                <div class="spinner-grow text-muted"></div>
                                <div class="spinner-grow text-primary"></div>
                                <div class="spinner-grow text-success"></div>
                                <div class="spinner-grow text-info"></div>
                                <div class="spinner-grow text-warning"></div>
                                <div class="spinner-grow text-danger"></div>
                                <div class="spinner-grow text-secondary"></div>
                                <div class="spinner-grow text-dark"></div>
                                <div class="spinner-grow text-light"></div>
                            </div>
                        </div>
                        <h:form id="update">
                            <div class="modal-body mx-3">
                                <div class="input-group form-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fas fa-key">Nueva</i></span>
                                    </div>
                                    <h:inputText a:type="password" value="#{loginBEAN.contra1}"  class="form-control" a:placeholder="password"/>
                                </div>

                                <div class="input-group form-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fas fa-key">Repetir</i></span>
                                    </div>
                                    <h:inputText a:type="password" value="#{loginBEAN.contra2}"  class="form-control" a:placeholder="password"/>
                                </div>

                            </div>
                            <div class="modal-footer d-flex justify-content-center">
                                <h:commandButton  class="btn btn-outline-success" value="Validara" action="#{loginBEAN.actualizarCotra()}">
                                </h:commandButton>
                            </div>
                        </h:form>
                    </div>
                </div>
            </div>

        </ui:define>

    </ui:composition>
</html>



